#!/bin/bash

portas=(20 21 22 23 25 53 67 68 69 80 110 111 123 135 137 138 139 143 161 162 179 389 443 445
465 514 515 520 523 548 554 587 631 636 989 990 993 995 1080 1194 1433 1434 1521 1723 2049 2082 2083
3306 3389 5060 5061 5432 5900 6379 8080 8443)

apres()
{
	clear
	echo -e "\033[01;31m"
	echo "
  _____      _               _____                      _ _          ___   ___   ___   ___  
 / ____|    | |             / ____|                    (_) |        / _ \ / _ \ / _ \ / _ \ 
| |    _   _| |__   ___ _ _| (___   ___  ___ _   _ _ __ _| |_ _   _| | | | | | | | | | | | |
| |   | | | | '_ \ / _ \ '__\___ \ / _ \/ __| | | | '__| | __| | | | | | | | | | | | | | | |
| |___| |_| | |_) |  __/ |  ____) |  __/ (__| |_| | |  | | |_| |_| | |_| | |_| | |_| | |_| |
 \_____\__, |_.__/ \___|_| |_____/ \___|\___|\__,_|_|  |_|\__|\__, |\___/ \___/ \___/ \___/ 
        __/ |                                                  __/ |                        
       |___/                                                  |___/                 
       
       PorScanner + TopPorts -> /dev/tcp"

	echo -e "\033[00;00m\n"
}

buscando()
{
        echo -e "\033[01;32m"
        echo -e "###########################################"
        echo -e "|->          Buscando Portas..          <-|"
        echo -e "###########################################"
        echo -e "\033[00;00m"
}

apres

if [ $# -ne 1 ]
then
	echo "Usage: $0 <host>"

else
	buscando
	echo -e "\033[01;312m# Host -> $1\033[00;00m\n"

	for i in ${portas[@]}
	do
		bash -c ">/dev/tcp/$1/$i" 2>/dev/null

		if [ $? -eq 0 ]
		then
			echo -e "\033[01;34m# Porta Aberta:\033[00;00m $i"
		fi
	done
fi
